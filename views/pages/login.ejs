<div class="row justify-content-center">
  <div class="col-lg-5">
    <!-- CARD LOGIN -->
    <div class="card p-4 animate__animated" id="cardLogin">
      <h5 class="mb-3"><i class="fa-solid fa-right-to-bracket"></i> Login</h5>
      <form id="formLogin">
        <div class="mb-3">
          <label>Email</label>
          <input class="form-control" name="email" type="email" required>
        </div>
        <div class="mb-3">
          <label>Password</label>
          <input class="form-control" name="password" type="password" required>
        </div>
        <button class="btn btn-primary w-100"><i class="fa-solid fa-sign-in-alt"></i> Login</button>
      </form>
      <hr>
      <p class="text-center">Belum punya akun? 
        <a href="#" id="showRegister"><i class="fa-solid fa-user-plus"></i> Register</a>
      </p>
    </div>

    <!-- CARD REGISTER -->
    <div class="card p-4 animate__animated" id="cardRegister" style="display:none;">
      <h5 class="mb-3"><i class="fa-solid fa-user-plus"></i> Register</h5>
      <form id="formRegister">
        <div class="mb-2">
          <label>Nama</label>
          <input class="form-control" name="name" required>
        </div>
        <div class="mb-2">
          <label>Email</label>
          <input class="form-control" name="email" type="email" required>
        </div>
        <div class="mb-2">
          <label>Password</label>
          <input class="form-control" name="password" type="password" required>
        </div>
        <button class="btn btn-outline-primary w-100"><i class="fa-solid fa-user-plus"></i> Register</button>
      </form>
      <hr>
      <p class="text-center">Sudah punya akun? 
        <a href="#" id="showLogin"><i class="fa-solid fa-right-to-bracket"></i> Login</a>
      </p>
    </div>
  </div>
</div>

<script>
// Login
$("#formLogin").on("submit", async e=>{
  e.preventDefault();
  const payload=Object.fromEntries(new FormData(e.target).entries());
  const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(payload)});
  const j=await r.json();
  if(!j.success) return Swal.fire("Error",j.error,"error");
  Swal.fire("Sukses","Login berhasil","success").then(()=>location.href="/dashboard");
});

// Register
$("#formRegister").on("submit", async e=>{
  e.preventDefault();
  const payload=Object.fromEntries(new FormData(e.target).entries());
  const r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(payload)});
  const j=await r.json();
  if(!j.success) return Swal.fire("Error",j.error,"error");
  Swal.fire("Sukses","Register berhasil","success").then(()=>location.href="/dashboard");
});

// Toggle animasi
$("#showRegister").on("click", e=>{
  e.preventDefault();
  $("#cardLogin").fadeOut(200,()=>$("#cardRegister").fadeIn(300));
});
$("#showLogin").on("click", e=>{
  e.preventDefault();
  $("#cardRegister").fadeOut(200,()=>$("#cardLogin").fadeIn(300));
});
</script>
